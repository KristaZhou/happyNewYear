<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>银鼠辞旧岁，金牛迎新春</title>
        <style>
            body {
                color: #333;
                margin: 0;
                background-color: rgb(161, 0, 5);
            }
            #app {
                height: 100vh;
                padding: 10px;
                display: none;
                box-sizing: border-box;
                background-image: url("./assets/images/star.gif");
                overflow-wrap: break-word !important;
            }
            #app {
                color: rgb(255, 218, 169);
                font-size: 20px;
            }
            #app .img-2021 {
                font-size: 0;
                text-align: center;
                padding: 10px;
            }
            #app .img-2021 img {
                width: 214px;
            }
            #app .img-2021 .slogan {
                font-size: 20px;
            }
            #app .userName {
                padding: 30px 20px 0 20px;
            }
            #app .message {
                padding: 20px 20px 0 20px;
            }
            #app iframe {
                position: fixed;
                left: -10px;
                right: -10px;
                bottom: -10px;
                width: calc(100% + 20px);
            }
            .kai-wrap {
                text-align: center;
                padding: 20px;
                display: none;
                font-size: 0;
            }
            .kai {
                width: 100px;
                height: 100px;
                border-radius: 50%;
                line-height: 100px;
                display: inline-block;
                font-size: 40px;
                color: #000;
                background-color: #d6c49b;
            }
            .hongbao {
                text-align: center;
                display: none;
            }
        </style>
    </head>

    <body>
        <div id="app">
            <div class="img-2021">
                <img src="./assets/images/2021.gif" alt="" />
                <div class="slogan">
                    银鼠辞旧岁，金牛迎新春
                </div>
            </div>
            <div class="userName">
                <span>hi, </span>
                <span id="userName"></span>
            </div>
            <div class="message" id="message"></div>
            <div class="kai-wrap" id="kai-wrap">
                <div class="kai" id="kai">開</div>
            </div>
            <div class="hongbao" id="hongbao">
                <span id="money"></span>
                <span>元</span>
            </div>
            <iframe
                frameborder="no"
                border="0"
                marginwidth="0"
                marginheight="0"
                width="100%"
                height="86"
                src="//music.163.com/outchain/player?type=2&id=1337150259&auto=1&height=66"
            ></iframe>
        </div>
        <script src="./data.js"></script>
        <script>
            document.querySelector("#app").style.display = "block";
            var userName = getQueryVariable("userName");
            var item =
                users.find((v) => {
                    return v.userName === userName;
                }) || users[randomIntFromInterval(0, users.length - 1)];
            document.querySelector("#userName").innerText = userName || "朋友";
            if (userName) {
                document.querySelector("#kai-wrap").style.display = 'block';
            }
            var clickCount = 0;
            document.querySelector("#message").innerText = item.message;
            document.querySelector("#kai").onclick = function() {
                clickCount++;
                if (clickCount > 3) {
                    alert('最多抽奖3次');
                    return;
                }
                document.querySelector("#money").innerText = randomFloatFromInterval(0.66, 6.66);
                document.querySelector("#hongbao").style.display = 'block';
            };
        </script>
    </body>
</html>
